<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>RNCryptor Class Reference</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<meta name="viewport" content="width=550" />
		<link rel="stylesheet" type="text/css" href="../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.0.5 (build 789)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">RNCryptor </a></h1>
				<a id="developerHome" href="../index.html">Rob Napier</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">RNCryptor Class Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar">
				<li id="toc_button">
					<button aria-label="Show Table of Contents" role="checkbox" class="open" id="table_of_contents"><span class="disclosure"></span>Table of Contents</button>
				</li>
				<li id="jumpto_button" role="navigation">
					<select id="jumpTo">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	
	
	
	
	<option value="tasks">Tasks</option>
	
	
	
	
	
	<option value="properties">Properties</option>
	
	<option value="//api/name/settings">&nbsp;&nbsp;&nbsp;&nbsp;settings</option>
	
	
	
	
	<option value="class_methods">Class Methods</option>
	
	<option value="//api/name/AES256Cryptor">&nbsp;&nbsp;&nbsp;&nbsp;+ AES256Cryptor</option>
	
	
	
	
	<option value="instance_methods">Instance Methods</option>
	
	<option value="//api/name/decryptData:password:error:">&nbsp;&nbsp;&nbsp;&nbsp;- decryptData:password:error:</option>
	
	<option value="//api/name/decryptFromStream:toStream:encryptionKey:IV:HMACKey:error:">&nbsp;&nbsp;&nbsp;&nbsp;- decryptFromStream:toStream:encryptionKey:IV:HMACKey:error:</option>
	
	<option value="//api/name/decryptFromStream:toStream:password:error:">&nbsp;&nbsp;&nbsp;&nbsp;- decryptFromStream:toStream:password:error:</option>
	
	<option value="//api/name/decryptFromURL:toURL:append:password:error:">&nbsp;&nbsp;&nbsp;&nbsp;- decryptFromURL:toURL:append:password:error:</option>
	
	<option value="//api/name/encryptData:password:error:">&nbsp;&nbsp;&nbsp;&nbsp;- encryptData:password:error:</option>
	
	<option value="//api/name/encryptFromStream:toStream:encryptionKey:IV:HMACKey:error:">&nbsp;&nbsp;&nbsp;&nbsp;- encryptFromStream:toStream:encryptionKey:IV:HMACKey:error:</option>
	
	<option value="//api/name/encryptFromStream:toStream:password:error:">&nbsp;&nbsp;&nbsp;&nbsp;- encryptFromStream:toStream:password:error:</option>
	
	<option value="//api/name/encryptFromURL:toURL:append:password:error:">&nbsp;&nbsp;&nbsp;&nbsp;- encryptFromURL:toURL:append:password:error:</option>
	
	<option value="//api/name/initWithSettings:">&nbsp;&nbsp;&nbsp;&nbsp;- initWithSettings:</option>
	
	<option value="//api/name/keyForPassword:salt:">&nbsp;&nbsp;&nbsp;&nbsp;- keyForPassword:salt:</option>
	
	<option value="//api/name/performOperation:fromStream:readCallback:toStream:writeCallback:encryptionKey:IV:footerSize:footer:error:">&nbsp;&nbsp;&nbsp;&nbsp;- performOperation:fromStream:readCallback:toStream:writeCallback:encryptionKey:IV:footerSize:footer:error:</option>
	
	
	
</select>
				</li>
			</ul>
		</header>
		<nav id="tocContainer" class="isShowingTOC">
			<ul id="toc" role="tree">
				
<li role="treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#overview">Overview</a></span></li>




<li role="treeitem" id="task_treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#tasks">Tasks</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Properties">Properties</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Creating an RNCryptor">Creating an RNCryptor</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Low-level encryption/decryption">Low-level encryption/decryption</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Key-based stream operations">Key-based stream operations</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Password-based operations">Password-based operations</a></span></li>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#properties">Properties</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/settings">settings</a></span></li>
	
</ul></li>



<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#class_methods">Class Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/AES256Cryptor">AES256Cryptor</a></span></li>
	
</ul></li>



<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#instance_methods">Instance Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/decryptData:password:error:">decryptData:password:error:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/decryptFromStream:toStream:encryptionKey:IV:HMACKey:error:">decryptFromStream:toStream:encryptionKey:IV:HMACKey:error:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/decryptFromStream:toStream:password:error:">decryptFromStream:toStream:password:error:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/decryptFromURL:toURL:append:password:error:">decryptFromURL:toURL:append:password:error:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/encryptData:password:error:">encryptData:password:error:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/encryptFromStream:toStream:encryptionKey:IV:HMACKey:error:">encryptFromStream:toStream:encryptionKey:IV:HMACKey:error:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/encryptFromStream:toStream:password:error:">encryptFromStream:toStream:password:error:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/encryptFromURL:toURL:append:password:error:">encryptFromURL:toURL:append:password:error:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/initWithSettings:">initWithSettings:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/keyForPassword:salt:">keyForPassword:salt:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/performOperation:fromStream:readCallback:toStream:writeCallback:encryptionKey:IV:footerSize:footer:error:">performOperation:fromStream:readCallback:toStream:writeCallback:encryptionKey:IV:footerSize:footer:error:</a></span></li>
	
</ul></li>


			</ul>
		</nav>
		<article>
			<div id="contents" class="isShowingTOC" role="main">
				<a title="RNCryptor Class Reference" name="top"></a>
				<div class="main-navigation navigation-top">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">RNCryptor Class Reference</h1>
					</div>		
				</div>
				<div id="container">	
					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<td class="specification-title">Inherits from</td>
	<td class="specification-value">NSObject</td>
</tr><tr>
	<td class="specification-title">Declared in</td>
	<td class="specification-value">RNCryptor.h<br />RNCryptor.m</td>
</tr>
						</tbody></table></div>
					
					
					
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>Encryptor/Decryptor for iOS</p>

<p>  Provides an easy-to-use, Objective-C interface to the AES functionality of CommonCrypto. Simplifies correct handling of
  password stretching (PBKDF2), salting, and IV. For more information on these terms, see &ldquo;Properly encrypting with AES
  with CommonCrypto,&rdquo; and iOS 5 Programming Pushing the Limits, Chapter 11. Also includes automatic HMAC handling to integrity-check messages.</p>

<p>  RNCryptor is immutable, stateless and thread-safe. A given cryptor object may be used simultaneously on multiple threads,
  and can be reused to encrypt or decrypt an arbitrary number of independent messages.</p>
					</div>
					
					
					
					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						<h2 class="subtitle subtitle-tasks">Tasks</h2>
						
						
						<a title="Properties" name="task_Properties"></a>
						<h3 class="subsubtitle task-title">Properties</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/settings">&nbsp;&nbsp;settings</a></code>
		<span class="tooltip"><p>Immutable settings for cryptor.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li>
						</ul>
						
						
						<a title="Creating an RNCryptor" name="task_Creating an RNCryptor"></a>
						<h3 class="subsubtitle task-title">Creating an RNCryptor</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/AES256Cryptor">+&nbsp;AES256Cryptor</a></code>
		<span class="tooltip"><p>Shared AES-256 encryptor</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/initWithSettings:">&ndash;&nbsp;initWithSettings:</a></code>
		<span class="tooltip"><p>Create a customiced cryptor</p></span>
	</span>
	
	
</li>
						</ul>
						
						
						<a title="Low-level encryption/decryption" name="task_Low-level encryption/decryption"></a>
						<h3 class="subsubtitle task-title">Low-level encryption/decryption</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/performOperation:fromStream:readCallback:toStream:writeCallback:encryptionKey:IV:footerSize:footer:error:">&ndash;&nbsp;performOperation:fromStream:readCallback:toStream:writeCallback:encryptionKey:IV:footerSize:footer:error:</a></code>
		<span class="tooltip"><p>Most fundamental encryption/decryption method. Does nothing but encrypt or decrypt the data given the current <a href="#//api/name/settings">settings</a>.
Provides callbacks during reading and writing, and can exclude the end of the stream (the &ldquo;footer&rdquo;) from processing.</p></span>
	</span>
	
	
</li>
						</ul>
						
						
						<a title="Key-based stream operations" name="task_Key-based stream operations"></a>
						<h3 class="subsubtitle task-title">Key-based stream operations</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/encryptFromStream:toStream:encryptionKey:IV:HMACKey:error:">&ndash;&nbsp;encryptFromStream:toStream:encryptionKey:IV:HMACKey:error:</a></code>
		<span class="tooltip"><p>Encrypt from a stream, to a stream, provided a key (not password), IV, and optional HMAC key.
The HMAC of the ciphertext will be written the the end of the stream.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/decryptFromStream:toStream:encryptionKey:IV:HMACKey:error:">&ndash;&nbsp;decryptFromStream:toStream:encryptionKey:IV:HMACKey:error:</a></code>
		<span class="tooltip"><p>Decrypt from a stream, to a stream, provided a key (not password), IV, and optional HMAC key.
The HMAC of the ciphertext will be read from the end of the stream if an HMAC key is provided. If there is an HMAC,
then it must match, or this method will return <code>NO</code>.</p></span>
	</span>
	
	
</li>
						</ul>
						
						
						<a title="Password-based operations" name="task_Password-based operations"></a>
						<h3 class="subsubtitle task-title">Password-based operations</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/encryptFromStream:toStream:password:error:">&ndash;&nbsp;encryptFromStream:toStream:password:error:</a></code>
		<span class="tooltip"><p>Encrypt from a stream, to a stream, provided a password.
Automatically generates required salts and IV. Prepends header and appends HMAC.
Full format is described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format">https://github.com/rnapier/RNCryptor/wiki/Data-Format</a></p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/encryptFromURL:toURL:append:password:error:">&ndash;&nbsp;encryptFromURL:toURL:append:password:error:</a></code>
		<span class="tooltip"><p>Encrypt from a URL, to a URL, provided a password.
Automatically generates required salts and IV. Prepends header and appends HMAC.
Full format is described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format">https://github.com/rnapier/RNCryptor/wiki/Data-Format</a></p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/encryptData:password:error:">&ndash;&nbsp;encryptData:password:error:</a></code>
		<span class="tooltip"><p>Encrypt data, provided a password.
Automatically generates required salts and IV. Prepends header and appends HMAC.
Full format is described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format">https://github.com/rnapier/RNCryptor/wiki/Data-Format</a></p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/decryptFromStream:toStream:password:error:">&ndash;&nbsp;decryptFromStream:toStream:password:error:</a></code>
		<span class="tooltip"><p>Decrypt from a stream, to a stream, provided a password.
Stream must be in format described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format,">https://github.com/rnapier/RNCryptor/wiki/Data-Format,</a> with header,
required salts and IV prepended, and HMAC appended.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/decryptFromURL:toURL:append:password:error:">&ndash;&nbsp;decryptFromURL:toURL:append:password:error:</a></code>
		<span class="tooltip"><p>Decrypt from a URL, to a URL, provided a password.
URL contents must be in format described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format,">https://github.com/rnapier/RNCryptor/wiki/Data-Format,</a> with header,
required salts and IV prepended, and HMAC appended.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/decryptData:password:error:">&ndash;&nbsp;decryptData:password:error:</a></code>
		<span class="tooltip"><p>Decrypt data, provided a password.
Data must be in format described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format,">https://github.com/rnapier/RNCryptor/wiki/Data-Format,</a> with header,
required salts and IV prepended, and HMAC appended.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/keyForPassword:salt:">&ndash;&nbsp;keyForPassword:salt:</a></code>
		<span class="tooltip"><p>Generate key given a password and salt using a PBKDF</p></span>
	</span>
	
	
</li>
						</ul>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Properties" name="properties"></a>
						<h2 class="subtitle subtitle-methods">Properties</h2>
						
						<div class="section-method">
	<a name="//api/name/settings" title="settings"></a>
	<h3 class="subsubtitle method-title">settings</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Immutable settings for cryptor.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>@property (nonatomic, readonly) RNCryptorSettings *settings</code></div>
	
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Immutable settings for cryptor.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RNCryptor.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
					
					<div class="section section-methods">
						<a title="Class Methods" name="class_methods"></a>
						<h2 class="subtitle subtitle-methods">Class Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/AES256Cryptor" title="AES256Cryptor"></a>
	<h3 class="subsubtitle method-title">AES256Cryptor</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Shared AES-256 encryptor</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>+ (RNCryptor *)AES256Cryptor</code></div>
	
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Shared AES-256 encryptor</p>

<p>AES-CTR cryptor with 256-bit key. 8-byte salt. HMAC+SHA256 of ciphertext appended (Encrypt-then-MAC).
Appropriate for most uses.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RNCryptor.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
					
					<div class="section section-methods">
						<a title="Instance Methods" name="instance_methods"></a>
						<h2 class="subtitle subtitle-methods">Instance Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/decryptData:password:error:" title="decryptData:password:error:"></a>
	<h3 class="subsubtitle method-title">decryptData:password:error:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Decrypt data, provided a password.
Data must be in format described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format,">https://github.com/rnapier/RNCryptor/wiki/Data-Format,</a> with header,
required salts and IV prepended, and HMAC appended.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (NSData *)decryptData:(NSData *)<em>ciphertext</em> password:(NSString *)<em>password</em> error:(NSError **)<em>error</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>ciphertext</em></dt>
			<dd><p>Data to decrypt</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>password</em></dt>
			<dd><p>Password to use for decryption</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>error</em></dt>
			<dd><p>If there is an error, this will contain the <code>NSError</code> by reference</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>Decrypted data, or <code>nil</code> if there was an error.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Decrypt data, provided a password.
Data must be in format described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format,">https://github.com/rnapier/RNCryptor/wiki/Data-Format,</a> with header,
required salts and IV prepended, and HMAC appended.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RNCryptor.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/decryptFromStream:toStream:encryptionKey:IV:HMACKey:error:" title="decryptFromStream:toStream:encryptionKey:IV:HMACKey:error:"></a>
	<h3 class="subsubtitle method-title">decryptFromStream:toStream:encryptionKey:IV:HMACKey:error:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Decrypt from a stream, to a stream, provided a key (not password), IV, and optional HMAC key.
The HMAC of the ciphertext will be read from the end of the stream if an HMAC key is provided. If there is an HMAC,
then it must match, or this method will return <code>NO</code>.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (BOOL)decryptFromStream:(NSInputStream *)<em>fromStream</em> toStream:(NSOutputStream *)<em>toStream</em> encryptionKey:(NSData *)<em>encryptionKey</em> IV:(NSData *)<em>IV</em> HMACKey:(NSData *)<em>HMACKey</em> error:(NSError **)<em>error</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>fromStream</em></dt>
			<dd><p>Stream to read. May be opened or unopened.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>toStream</em></dt>
			<dd><p>Stream to write. May be opened or unopened.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>encryptionKey</em></dt>
			<dd><p>Encryption key of correct length for algorithm. This is not a password. No hashing or PBKDF will be applied.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>IV</em></dt>
			<dd><p>Initialization vector of correct length for algorithm. For &ldquo;no IV,&rdquo; you must pass a zero-filled block of the correct length. This is strongly discouraged.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>HMACKey</em></dt>
			<dd><p>HMAC key, matching the encryption key.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>error</em></dt>
			<dd><p>If there is an error, this will contain the <code>NSError</code> by reference</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p><code>YES</code> on success. <code>NO</code> on failure (including HMAC mismatch), and <code>error</code> will contain the error object.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Decrypt from a stream, to a stream, provided a key (not password), IV, and optional HMAC key.
The HMAC of the ciphertext will be read from the end of the stream if an HMAC key is provided. If there is an HMAC,
then it must match, or this method will return <code>NO</code>.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RNCryptor.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/decryptFromStream:toStream:password:error:" title="decryptFromStream:toStream:password:error:"></a>
	<h3 class="subsubtitle method-title">decryptFromStream:toStream:password:error:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Decrypt from a stream, to a stream, provided a password.
Stream must be in format described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format,">https://github.com/rnapier/RNCryptor/wiki/Data-Format,</a> with header,
required salts and IV prepended, and HMAC appended.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (BOOL)decryptFromStream:(NSInputStream *)<em>fromStream</em> toStream:(NSOutputStream *)<em>toStream</em> password:(NSString *)<em>password</em> error:(NSError **)<em>error</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>fromStream</em></dt>
			<dd><p>Stream to read. May be opened or unopened.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>toStream</em></dt>
			<dd><p>Stream to write. May be opened or unopened.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>password</em></dt>
			<dd><p>Password to use for decryption</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>error</em></dt>
			<dd><p>If there is an error, this will contain the <code>NSError</code> by reference</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p><code>YES</code> on success. <code>NO</code> on failure, and <code>error</code> will contain the error object.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Decrypt from a stream, to a stream, provided a password.
Stream must be in format described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format,">https://github.com/rnapier/RNCryptor/wiki/Data-Format,</a> with header,
required salts and IV prepended, and HMAC appended.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RNCryptor.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/decryptFromURL:toURL:append:password:error:" title="decryptFromURL:toURL:append:password:error:"></a>
	<h3 class="subsubtitle method-title">decryptFromURL:toURL:append:password:error:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Decrypt from a URL, to a URL, provided a password.
URL contents must be in format described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format,">https://github.com/rnapier/RNCryptor/wiki/Data-Format,</a> with header,
required salts and IV prepended, and HMAC appended.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (BOOL)decryptFromURL:(NSURL *)<em>fromURL</em> toURL:(NSURL *)<em>toURL</em> append:(BOOL)<em>append</em> password:(NSString *)<em>password</em> error:(NSError **)<em>error</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>fromURL</em></dt>
			<dd><p>URL to read.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>toURL</em></dt>
			<dd><p>URL to write.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>append</em></dt>
			<dd><p>Should output be appended rather than overwritng?</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>password</em></dt>
			<dd><p>Password to use for decryption</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>error</em></dt>
			<dd><p>If there is an error, this will contain the <code>NSError</code> by reference</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p><code>YES</code> on success. <code>NO</code> on failure, and <code>error</code> will contain the error object.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Decrypt from a URL, to a URL, provided a password.
URL contents must be in format described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format,">https://github.com/rnapier/RNCryptor/wiki/Data-Format,</a> with header,
required salts and IV prepended, and HMAC appended.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RNCryptor.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/encryptData:password:error:" title="encryptData:password:error:"></a>
	<h3 class="subsubtitle method-title">encryptData:password:error:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Encrypt data, provided a password.
Automatically generates required salts and IV. Prepends header and appends HMAC.
Full format is described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format">https://github.com/rnapier/RNCryptor/wiki/Data-Format</a></p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (NSData *)encryptData:(NSData *)<em>plaintext</em> password:(NSString *)<em>password</em> error:(NSError **)<em>error</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>plaintext</em></dt>
			<dd><p>Data to encrypt</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>password</em></dt>
			<dd><p>Password to use for encryption</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>error</em></dt>
			<dd><p>If there is an error, this will contain the <code>NSError</code> by reference</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>Encrypted data, or <code>nil</code> if there was an error.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Encrypt data, provided a password.
Automatically generates required salts and IV. Prepends header and appends HMAC.
Full format is described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format">https://github.com/rnapier/RNCryptor/wiki/Data-Format</a></p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RNCryptor.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/encryptFromStream:toStream:encryptionKey:IV:HMACKey:error:" title="encryptFromStream:toStream:encryptionKey:IV:HMACKey:error:"></a>
	<h3 class="subsubtitle method-title">encryptFromStream:toStream:encryptionKey:IV:HMACKey:error:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Encrypt from a stream, to a stream, provided a key (not password), IV, and optional HMAC key.
The HMAC of the ciphertext will be written the the end of the stream.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (BOOL)encryptFromStream:(NSInputStream *)<em>fromStream</em> toStream:(NSOutputStream *)<em>toStream</em> encryptionKey:(NSData *)<em>encryptionKey</em> IV:(NSData *)<em>IV</em> HMACKey:(NSData *)<em>HMACKey</em> error:(NSError **)<em>error</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>fromStream</em></dt>
			<dd><p>Stream to read. May be opened or unopened.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>toStream</em></dt>
			<dd><p>Stream to write. May be opened or unopened.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>encryptionKey</em></dt>
			<dd><p>Encryption key of correct length for algorithm. This is not a password. No hashing or PBKDF will be applied.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>IV</em></dt>
			<dd><p>Initialization vector of correct length for algorithm. For &ldquo;no IV,&rdquo; you must pass a zero-filled block of the correct length. This is strongly discouraged.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>HMACKey</em></dt>
			<dd><p>HMAC key. This can be of any length. It is discouraged to make this the same as <code>encryptionKey</code>. If HMACKey is <code>nil</code>, no HMAC will be written.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>error</em></dt>
			<dd><p>If there is an error, this will contain the <code>NSError</code> by reference</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p><code>YES</code> on success. <code>NO</code> on failure, and <code>error</code> will contain the error object.</p><p>`</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Encrypt from a stream, to a stream, provided a key (not password), IV, and optional HMAC key.
The HMAC of the ciphertext will be written the the end of the stream.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RNCryptor.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/encryptFromStream:toStream:password:error:" title="encryptFromStream:toStream:password:error:"></a>
	<h3 class="subsubtitle method-title">encryptFromStream:toStream:password:error:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Encrypt from a stream, to a stream, provided a password.
Automatically generates required salts and IV. Prepends header and appends HMAC.
Full format is described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format">https://github.com/rnapier/RNCryptor/wiki/Data-Format</a></p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (BOOL)encryptFromStream:(NSInputStream *)<em>fromStream</em> toStream:(NSOutputStream *)<em>toStream</em> password:(NSString *)<em>password</em> error:(NSError **)<em>error</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>fromStream</em></dt>
			<dd><p>Stream to read. May be opened or unopened.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>toStream</em></dt>
			<dd><p>Stream to write. May be opened or unopened.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>password</em></dt>
			<dd><p>Password to use for encryption</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>error</em></dt>
			<dd><p>If there is an error, this will contain the <code>NSError</code> by reference</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p><code>YES</code> on success. <code>NO</code> on failure, and <code>error</code> will contain the error object.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Encrypt from a stream, to a stream, provided a password.
Automatically generates required salts and IV. Prepends header and appends HMAC.
Full format is described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format">https://github.com/rnapier/RNCryptor/wiki/Data-Format</a></p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RNCryptor.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/encryptFromURL:toURL:append:password:error:" title="encryptFromURL:toURL:append:password:error:"></a>
	<h3 class="subsubtitle method-title">encryptFromURL:toURL:append:password:error:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Encrypt from a URL, to a URL, provided a password.
Automatically generates required salts and IV. Prepends header and appends HMAC.
Full format is described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format">https://github.com/rnapier/RNCryptor/wiki/Data-Format</a></p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (BOOL)encryptFromURL:(NSURL *)<em>fromURL</em> toURL:(NSURL *)<em>toURL</em> append:(BOOL)<em>append</em> password:(NSString *)<em>password</em> error:(NSError **)<em>error</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>fromURL</em></dt>
			<dd><p>URL to read.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>toURL</em></dt>
			<dd><p>URL to write.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>append</em></dt>
			<dd><p>Should output be appended rather than overwritng?</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>password</em></dt>
			<dd><p>Password to use for encryption</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>error</em></dt>
			<dd><p>If there is an error, this will contain the <code>NSError</code> by reference</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p><code>YES</code> on success. <code>NO</code> on failure, and <code>error</code> will contain the error object.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Encrypt from a URL, to a URL, provided a password.
Automatically generates required salts and IV. Prepends header and appends HMAC.
Full format is described at <a href="https://github.com/rnapier/RNCryptor/wiki/Data-Format">https://github.com/rnapier/RNCryptor/wiki/Data-Format</a></p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RNCryptor.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/initWithSettings:" title="initWithSettings:"></a>
	<h3 class="subsubtitle method-title">initWithSettings:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Create a customiced cryptor</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (RNCryptor *)initWithSettings:(RNCryptorSettings *)<em>settings</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>settings</em></dt>
			<dd><p>Immutable <a href="#//api/name/settings">settings</a> for cryptor.</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Create a customiced cryptor</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RNCryptor.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/keyForPassword:salt:" title="keyForPassword:salt:"></a>
	<h3 class="subsubtitle method-title">keyForPassword:salt:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Generate key given a password and salt using a PBKDF</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (NSData *)keyForPassword:(NSString *)<em>password</em> salt:(NSData *)<em>salt</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>password</em></dt>
			<dd><p>Password to use for PBKDF</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>salt</em></dt>
			<dd><p>Salt for password</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>Key</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Generate key given a password and salt using a PBKDF</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RNCryptor.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/performOperation:fromStream:readCallback:toStream:writeCallback:encryptionKey:IV:footerSize:footer:error:" title="performOperation:fromStream:readCallback:toStream:writeCallback:encryptionKey:IV:footerSize:footer:error:"></a>
	<h3 class="subsubtitle method-title">performOperation:fromStream:readCallback:toStream:writeCallback:encryptionKey:IV:footerSize:footer:error:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Most fundamental encryption/decryption method. Does nothing but encrypt or decrypt the data given the current <a href="#//api/name/settings">settings</a>.
Provides callbacks during reading and writing, and can exclude the end of the stream (the &ldquo;footer&rdquo;) from processing.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (BOOL)performOperation:(CCOperation)<em>operation</em> fromStream:(NSInputStream *)<em>fromStream</em> readCallback:(RNCryptorReadCallback)<em>readCallback</em> toStream:(NSOutputStream *)<em>toStream</em> writeCallback:(RNCryptorWriteCallback)<em>writeCallback</em> encryptionKey:(NSData *)<em>encryptionKey</em> IV:(NSData *)<em>IV</em> footerSize:(NSUInteger)<em>footerSize</em> footer:(NSData **)<em>footer</em> error:(NSError **)<em>error</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>operation</em></dt>
			<dd><p><code>CCEncrypt</code> or <code>CCDecrypt</code></p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>fromStream</em></dt>
			<dd><p>Stream to read. May be opened or unopened.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>readCallback</em></dt>
			<dd><p>Block to call with data read from <code>fromStream</code></p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>toStream</em></dt>
			<dd><p>Stream to write. May be opened or unopened.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>writeCallback</em></dt>
			<dd><p>Block to call with data successfully written to <code>toStream</code>.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>encryptionKey</em></dt>
			<dd><p>Encryption key of correct length for algorithm. This is not a password. No hashing or PBKDF will be applied.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>IV</em></dt>
			<dd><p>Initialization vector of correct length for algorithm. For &ldquo;no IV,&rdquo; you must pass a zero-filled block of the correct length. This is strongly discouraged.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>footerSize</em></dt>
			<dd><p>Size in bytes of the footer. This is the end of the stream that should not be processed. May be 0.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>footer</em></dt>
			<dd><p>If <code>footerSize</code> > 0, then this will contain the footer data by reference.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>error</em></dt>
			<dd><p>If there is an error, this will contain the <code>NSError</code> by reference</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p><code>YES</code> on success. <code>NO</code> on failure, and <code>error</code> will contain the error object.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Most fundamental encryption/decryption method. Does nothing but encrypt or decrypt the data given the current <a href="#//api/name/settings">settings</a>.
Provides callbacks during reading and writing, and can exclude the end of the stream (the &ldquo;footer&rdquo;) from processing.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RNCryptor.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
				</div>
				<div class="main-navigation navigation-bottom">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2012 Rob Napier. All rights reserved. (Last updated: 2012-03-19)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.0.5 (build 789)</a>.</span></p>
						
					</div>
				</div>
			</div>
		</article>
		<script type="text/javascript">
			function jumpToChange()
			{
				window.location.hash = this.options[this.selectedIndex].value;
			}
			
			function toggleTOC()
			{
				var contents = document.getElementById('contents');
				var tocContainer = document.getElementById('tocContainer');
				
				if (this.getAttribute('class') == 'open')
				{
					this.setAttribute('class', '');
					contents.setAttribute('class', '');
					tocContainer.setAttribute('class', '');
					
					window.name = "hideTOC";
				}
				else
				{
					this.setAttribute('class', 'open');
					contents.setAttribute('class', 'isShowingTOC');
					tocContainer.setAttribute('class', 'isShowingTOC');
					
					window.name = "";
				}
				return false;
			}
			
			function toggleTOCEntryChildren(e)
			{
				e.stopPropagation();
				var currentClass = this.getAttribute('class');
				if (currentClass == 'children') {
					this.setAttribute('class', 'children open');
				}
				else if (currentClass == 'children open') {
					this.setAttribute('class', 'children');
				}
				return false;
			}
			
			function tocEntryClick(e)
			{
				e.stopPropagation();
				return true;
			}
			
			function init()
			{
				var selectElement = document.getElementById('jumpTo');
				selectElement.addEventListener('change', jumpToChange, false);
				
				var tocButton = document.getElementById('table_of_contents');
				tocButton.addEventListener('click', toggleTOC, false);
				
				var taskTreeItem = document.getElementById('task_treeitem');
				if (taskTreeItem.getElementsByTagName('li').length > 0)
				{
					taskTreeItem.setAttribute('class', 'children');
					taskTreeItem.firstChild.setAttribute('class', 'disclosure');
				}
				
				var tocList = document.getElementById('toc');
				
				var tocEntries = tocList.getElementsByTagName('li');
				for (var i = 0; i < tocEntries.length; i++) {
					tocEntries[i].addEventListener('click', toggleTOCEntryChildren, false);
				}
				
				var tocLinks = tocList.getElementsByTagName('a');
				for (var i = 0; i < tocLinks.length; i++) {
					tocLinks[i].addEventListener('click', tocEntryClick, false);
				}
				
				if (window.name == "hideTOC") {
					toggleTOC.call(tocButton);
				}
			}
			
			window.onload = init;
			
			// If showing in Xcode, hide the TOC and Header
			if (navigator.userAgent.match(/xcode/i)) {
				document.getElementById("contents").className = "hideInXcode"
				document.getElementById("tocContainer").className = "hideInXcode"
				document.getElementById("top_header").className = "hideInXcode"
			}
			
		</script>
	</body>
</html>